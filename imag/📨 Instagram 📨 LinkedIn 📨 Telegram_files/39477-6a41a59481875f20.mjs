(self.modernJsonp=self.modernJsonp||[]).push([["39477"],{95664:function(e,a,o){o.d(a,{$K:()=>i,dh:()=>n,ry:()=>l,xX:()=>s});let n=e=>/instagram/i.test(e||""),l=e=>n(e)||/facebook/i.test(e||"")||/line/i.test(e||"")||/wechat/i.test(e||""),t="[Pinterest/Android]",i=e=>(e||"").includes("[Pinterest/iOS]")||(e||"").includes(t),s=e=>(e||"").includes(t)},262297:function(e,a,o){o.d(a,{Tp:()=>d,Vd:()=>s,iU:()=>i});var n=o(4533),l=o(994507),t=o(34550);let i=()=>{try{let{count:e,time:a,ts:o}=(0,t.M0)().getItem(n.SI)??{};if("number"==typeof e&&"number"==typeof a&&"number"==typeof o)return{count:e,time:a,ts:o};throw Error("Invalid revisitation data")}catch(e){return(0,l.dm)()}},s=e=>{try{let a=(0,t.M0)();if(!a.accessAllowed)return;a.setItem(n.SI,{...e,ts:Date.now()})}catch(e){}},d=(e,a)=>{let o=e;o&&!(o.count<1)&&o.time?new Date().getTime()-o.time>l.WT&&a(o={...o,count:o.count+1}):a(o=(0,l.dm)())}},331357:function(e,a,o){o.d(a,{J:()=>t,U:()=>m});var n=o(27399),l=o(767415);let t="nic_v4",i=`${t}=1a`,s=`${t}=1b`,d=[i,s],r=["invite_code","invite","board_invite_code","sender"],u=null,_=e=>!!r.find(a=>e.includes(a)),p=e=>{let a;return e.pathname.includes("/pin/")&&!_(e.search)&&(a=e.search,!d.find(e=>a.includes(e)))},c=async e=>{let{resource_response:a}=await n.Z.create("InviteSocialTrackingParamNonInviteResource",{user_id:e}).callCreate();if(!a)return(0,l.nP)(`${t}.social_tracking_pin_non_invite.no_resource_response`),"";{let e=encodeURIComponent(a.data);return(0,l.nP)(`${t}.social_tracking_pin_non_invite.encrypted.${e?"true":"false"}`),e}},g=(e,a,o=!1,n)=>{if(!p(e))return;let d=o?"mweb":"web";if(!a)return void(0,l.nP)(`${d}.${t}.social_tracking_pin_non_invite.insert.no_encrypted_id`);(0,l.nP)(`${d}.${t}.social_tracking_pin_non_invite.insert.attempt`);try{let r=((e,a,o)=>{let n=e.search?"&":"?";return e.pathname+e.search+(n+(o?s:i)+a)})(e,a,o||!1);(0,l.nP)(`${d}.${t}.social_tracking_pin_non_invite.insert.success`),n(r)}catch{(0,l.nP)(`${d}.${t}.social_tracking_pin_non_invite.insert.caught_exception`)}},m=(e,a,o,n,i)=>{let s=o?"mweb":"web";(0,l.nP)(`${s}.${t}.social_tracking_pin_non_invite.attempt`);try{let d;!o&&n&&p(e)?((0,l.nP)(`${s}.${t}.social_tracking_pin_non_invite.search_string_eligible`),((e,a,o=!1,n)=>{u?g(e,u,o,n):(async()=>{let l=await c(a);u=l,g(e,l,o,n)})()})(e,a,o,i)):(d=e.search,!_(d)&&!d.includes("sender")&&d.includes(t)&&(0,l.nP)(`${s}.${t}.social_tracking_pin_non_invite.search_string_land`))}catch{(0,l.nP)(`${s}.${t}.social_tracking_pin_non_invite.caught_exception`)}}},456871:function(e,a,o){o.d(a,{Z:()=>_});var n=o(312048),l=o(331357),t=o(173874),i=o(774838),s=o(843716),d=o(900907),r=o(986523),u=o(767415);function _(){let e,{isBot:a,isSocialBot:o,referrerFromCookie:_,referrerFromHeader:p,countryFromHostName:c,countryFromIp:g,regionFromIp:m,isAuthenticated:h}=(0,i.B)(),S=(0,n.TH)(),b=(0,r.Z)(),v=new URLSearchParams(S.search),w=!a&&!!v.get("utm_pai"),y=v.get("utm_source"),O=!a&&!o&&(0,t.hasInviteCode)(S),C=(0,d.Z)({countryFromHostName:c||"",countryFromIp:g||"",regionFromIp:m||"",isAuthenticated:h}),I=p||C&&_||"";e=b||!C?I:(0,s.an)(I);let P=!1,L=!a&&!o&&y&&["email",String(31)].includes(y),E=!a&&!o&&y&&["fb"].includes(y),f="offsite"===y,N=!a&&!o&&!!(e&&(/facebook/.test(e)||/fb/.test(e))),T=!a&&!o&&!!(e&&(/twitter/.test(e)||/tw/.test(e)));O&&(0,u.nP)("unauth.entry_channel.invite_code",{sampleRate:1}),L&&(0,u.nP)("unauth.entry_channel.email_utm_source",{sampleRate:1}),E&&(0,u.nP)("unauth.entry_channel.social_media_utm_source_fb",{sampleRate:1}),f&&(0,u.nP)("unauth.entry_channel.offsite_utm_source",{sampleRate:1}),N&&(0,u.nP)("unauth.entry_channel.social_media_referer_fb",{sampleRate:1}),T&&(0,u.nP)("unauth.entry_channel.social_media_referer_twitter",{sampleRate:1}),P=(0,s.Xn)(e);let M=!a&&P,U=!!v.get(l.J),k=!!v.get("twa_type")||e&&e.startsWith("android-app://com.pinterest.twa"),x=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_admin","utm_id","utm_mail","utm_swu"].some(e=>null!==v.get(e))||!!e||U||k;return{isPaid:w,isInvite:O,utmSource:y,referrer:e,isSocial:O,isDirect:!a&&!w&&!O&&!M&&!x,isSEO:M,isBrowserStorageAllowed:C,isOffsite:f,isBot:a||o}}},843716:function(e,a,o){o.d(a,{Xn:()=>m,Yf:()=>v,an:()=>h});var n=o(173874),l=o(138482),t=o(99737);let i="BING",s="GOOGLE",d="YAHOO",r="YANDEX",u="RAKUTEN",_="NAVER",p="AMP_CACHE",c="DUCKDUCKGO",g=[s,i,d,r,u,_,p,c];function m(e){return g.includes(function(e){let{hostname:a}=(0,t.Z)(e,!0);if(a&&e){if(a.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return s;else if(a.includes("bing."))return i;else if(a.includes("yahoo."))return d;else if(a.includes("yandex."))return r;else if(a.includes("rakuten."))return u;else if(a.includes("naver."))return _;else if(a.includes("duckduckgo."))return c;else if(a.includes(".cdn.ampproject.org"))return p}return""}(e))}function h(e){return e||"undefined"!=typeof document&&document.referrer||""}let S=e=>"/"!==e[e.length-1]?`${e}/`:e,b=e=>{let a=S(e),o=(0,n.createRouterLocation)({url:a});return(0,n.isCloseupPage)(o)?"PIN":(0,n.isBoardPage)(o)?"BOARD":(0,l.Z)(o)?"PROFILE":(0,n.isAnyTodayPage)(o)?"TODAY":(0,n.isAnyIdeasPage)(o)?"IDEA":(0,n.isAnyShoppingPage)(o)?"SHOPPING":"UNKNOWN"},v=({country:e,language:a,isBot:o,hostname:n,pathname:l})=>({domain:n,country:e,language:a,currentUrl:l,pageType:b(l),referrer:document.referrer,isBot:o,links:(({selector:e,skipExternal:a})=>{let o=Array.from(document.querySelectorAll(e)),n={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},l=new Set;return o.forEach(e=>{let o=e.getAttribute("href");if(!o||o.startsWith("#")||a&&o.startsWith("http")&&!o.includes(window.location.hostname))return;let t=S(o);if(l.has(t))return;l.add(t);let i=b(t);"PIN"===i?n.pin.push(t):"BOARD"===i?n.board.push(t):"PROFILE"===i?n.user.push(t):"TODAY"===i?n.today.push(t):"IDEA"===i?n.idea.push(t):"SHOPPING"===i&&n.shopping.push(t)}),n})({selector:"a[href]",skipExternal:!0})})},434291:function(e,a,o){o.d(a,{m:()=>l,r:()=>t});var n=o(815271);function l(e,a){(0,n.Z)("ðŸŽ¯ ENGAGEMENT_SCORE_CALCULATED",{trigger:e,...a})}function t(e,a){(0,n.Z)("desktop"===e?"DESKTOP_UPSELL_DECISION":"MOBILE_UPSELL_DECISION",a)}},116412:function(e,a,o){o.d(a,{U:()=>l,a:()=>t});var n=o(935833);function l({PES:e,NUS:a,conversionIntentLevel:o,triggerAction:l,deviceType:t}){(0,n.My)("engagement_score.calculated",{engagement_score:e,upsell_negative_score:a,user_intent_bucket:o,upsell_type_tag:"conversion",trigger_action:l,device_type:t})}function t({upsellType:e,decision:a,intentLevel:o,PES:l,NUS:t,experimentVariant:i}){(0,n.My)("upsell.decision_with_intent",{upsell_type:e,decision:a,intent_level:o,pes:l,nus:t,experiment_variant:i})}},184285:function(e,a,o){o.d(a,{HZ:()=>b,ZP:()=>N,e_:()=>f,pT:()=>C});var n=o(667294),l=o(581722),t=o(312048),i=o(15881),s=o(95664),d=o(79271),r=o(456871),u=o(774838),_=o(418282),p=o(270922),c=o(739405),g=o(658375),m=o(767415);let h=Date.now(),S=()=>(0,l.v9)(e=>e.upsell?.mWebSignupModal.modal.isShown??!1),b=()=>(0,l.v9)(e=>e.upsell?.modal),v=()=>(0,d.OC)(),w=()=>Date.now()-h,y=()=>(0,l.v9)(e=>e.upsell?.mWebSignupModal.isUnauthSharingModalsShown??!1),O=()=>(0,l.v9)(e=>!!e.upsell?.mWebSignupModal.modalHasShown),C=()=>(0,l.v9)(e=>e.upsell?.mWebSignupModal),I=()=>{let e=(0,u.B)(),a=(0,r.Z)(),o=(0,c.ZP)(),l=(0,t.TH)();return(0,n.useMemo)(()=>(0,p.T9)(e,a,o,l.pathname),[e,a,o,l.pathname])},P=Object.freeze(["CO","ID"]),L=e=>P.includes(e),E=e=>{if(!(0,s.ry)(e))return!1;let a=(0,_.Nl)();return a.getItem(i.QV)||((0,m.nP)("mobile_signup_modal.rules.suppress_for_social_in_app_browser"),a.setItem(i.QV,"1")),!0},f=({isModalShown:e,isUnauthSharingModalsShown:a,modalHasShown:o,country:n,userAgent:l})=>!e&&!(a||o&&L(n)||(0,g.P)()||E(l));function N(){let e=S(),a=(0,l.v9)(e=>e.upsell?.mWebSignupModal.modal),o=(0,l.v9)(e=>e.upsell?.mWebSignupModal.upsellEligibleNavigationCount),t=y();return{isModalShown:e,modal:a,upsellEligibleNavigationCount:o,isUnauthSharingModalsShown:t,modalHasShown:O(),sessionContext:I(),isUpsellEnabledGlobally:(()=>{let e=S(),a=y(),o=O(),l=I();return(0,n.useCallback)(()=>!e&&!(({isUnauthSharingModalsShown:e,modalHasShown:a,sessionContext:o})=>{if(!o)return!1;let{country:n,userAgent:l}=o;return e||a&&L(n)||(0,g.P)()||E(l)})({isUnauthSharingModalsShown:a,modalHasShown:o,sessionContext:l}),[e,a,o,l])})(),getPinImpressionCount:v,getSessionDuration:w}}},896399:function(e,a,o){o.d(a,{Fy:()=>d,Vi:()=>r,aJ:()=>s,dn:()=>i,gH:()=>n,kQ:()=>t,mV:()=>l});let n="RECORD_NAVIGATIONAL_PAGE",l="SET_INITIAL_SESSION_CONTEXT",t="UPDATE_LATEST_L1_VERTICAL",i="RESET_UPSELL_TRIGGER_STATE",s="RECORD_SOCIAL_PIN_LANDING_PAGE",d="TRIGGER_SOCIAL_DELAY_MODAL",r="TRIGGER_SOCIAL_SCROLL_MODAL"},432414:function(e,a,o){o.d(a,{ZW:()=>f,Gk:()=>E,YM:()=>N});var n=o(173874),l=o(138482),t=o(434291),i=o(116412),s=o(896399),d=o(730056);let r="dweb_eoq_q3_standard",u="dweb_eoq_q3_advanced",_="mweb_eoq_q3_standard",p="mweb_eoq_q3_advanced",c="mweb_eoq_q4_advanced_ucan",g="mweb_eoq_q4_emergency_ucan",m="mweb_eoq_q4_advanced_non_ucan",h="mweb_eoq_q4_emergency_non_ucan",S="dweb_eoq_q4_advanced_ucan",b="dweb_eoq_q4_emergency_ucan",v="dweb_eoq_q4_advanced_non_ucan",w="dweb_eoq_q4_emergency_non_ucan",y=[{bundleId:"dweb_eoq_q3_standard",experimentKey:r,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}}}},{bundleId:"dweb_eoq_q3_advanced",experimentKey:u,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}}}},{bundleId:"mweb_eoq_q3_standard",experimentKey:_,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}}}},{bundleId:"mweb_eoq_q3_advanced",experimentKey:p,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_ucan",experimentKey:c,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_ucan",experimentKey:g,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_non_ucan",experimentKey:m,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_non_ucan",experimentKey:h,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"dweb_eoq_q4_advanced_ucan",experimentKey:S,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_advanced_non_ucan",experimentKey:v,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_ucan",experimentKey:b,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_non_ucan",experimentKey:w,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}}];function O(e,a){let o=y.filter(o=>{if(!o.active||!o.overrides[e])return!1;switch(o.experimentKey){case r:return a("dweb_eoq_q3_standard").anyEnabled;case u:return a("dweb_eoq_q3_advanced").anyEnabled;case _:return a("mweb_eoq_q3_standard").anyEnabled;case p:return a("mweb_eoq_q3_advanced").anyEnabled;case c:return a("mweb_eoq_q4_advanced_ucan").anyEnabled;case g:return a("mweb_eoq_q4_emergency_ucan").anyEnabled;case m:return a("mweb_eoq_q4_advanced_non_ucan").anyEnabled;case h:return a("mweb_eoq_q4_emergency_non_ucan").anyEnabled;case S:return a("dweb_eoq_q4_advanced_ucan").anyEnabled;case b:return a("dweb_eoq_q4_emergency_ucan").anyEnabled;case v:return a("dweb_eoq_q4_advanced_non_ucan").anyEnabled;case w:return a("dweb_eoq_q4_emergency_non_ucan").anyEnabled;default:return!1}});return o[o.length-1]?.overrides[e]}let C=e=>({id:e.id,evaluate:function({ruleId:e,baseEvaluateFunction:a}){return o=>{let{checkExperiment:n,session:l}=o,t=n&&O(e,n)?.evaluateContextOverride||{},i=t[l?.channel??"default"]||t.default||{};return a((0,d.Z)(o,i))}}({ruleId:e.id,baseEvaluateFunction:e.evaluate}),getNextState:function({ruleId:e,baseNextStateFunction:a}){return({action:o,state:n,decision:l})=>{let t=a({action:o,state:n,decision:l});if(!("payload"in o&&"object"==typeof o.payload&&null!==o.payload&&"checkExperiment"in o.payload))return t;let i=n.initialSessionContext||("sessionContext"in o.payload?o.payload.sessionContext:void 0),s=O(e,o.payload.checkExperiment)?.stateOverride||{},r=s[i?.channel??"default"]||s.default||{};return 0===Object.keys(r).length?t:(0,d.Z)(t,r)}}({ruleId:e.id,baseNextStateFunction:e.getNextState})});var I=o(224841);let P=["enabled","enabled_no_legal","enabled_copy_2"],L=(e,a)=>{let o={enabled_1:["high","medium"],enabled_2:["high"],enabled_3:["medium"],enabled_4:["medium","low"]}[a];return!!o&&o.includes(e||"unknown")},E={shouldShowRelatedPinsGradientUpsell:C({id:"desktop_related_pins_gradient_upsell_trigger",evaluate:({relatedPinsGradientUpsellEverShown:e,checkExperiment:a})=>{if(e)return!1;let o=a?.("ce_dweb_unauth_related_pins_limit");return!!o?.anyEnabled},getNextState:({state:e})=>({...e,showRelatedPinsGradientUpsell:!0,relatedPinsGradientUpsellEverShown:!0})}),shouldShowCloseupNavigationalModal:C({id:"closeup_navigational_modal_trigger",evaluate:({pinViewCount:e,navigationalPagesUpsellSeen:a,checkExperiment:o})=>!o?.("pc_no_navigational_upsell").anyEnabled&&(e??0)>=4&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_1",container:"closeup",reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowSaveModal:C({id:"save_modal_trigger",evaluate:()=>!0,getNextState:({action:e,state:a})=>({...a,pinSaveCount:a.pinSaveCount+1,pinId:e.payload.pinId,attributionLabel:e.payload.attributionLabel,showSaveModal:!0,modal:{isShown:!0,displayProps:{attributionLabel:e.payload.attributionLabel,container:"save",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",savePinId:e.payload.pinId,signupFlow:{type:"signup"},source:"saveButtonExp"}}})}),shouldShowNavigationalModal:C({id:"desktop_navigational_modal_trigger",evaluate:({uniqueNavigationalPagesSeen:e=[],navigationalPagesUpsellSeen:a,navigationalPagesViewThresholdDesktop:o,checkExperiment:n})=>!n?.("pc_no_navigational_upsell").anyEnabled&&e.length>=(o??4)&&!a,getNextState:({state:e,action:a})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_${a.payload.containerPage}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowNavigationalModalIntentBased:C({id:"desktop_navigational_modal_intent_trigger",evaluate:({navigationalPagesUpsellSeen:e,engagementScore:a,checkExperiment:o})=>{let n=o?.("engagement_score_v0_dweb");if(!n?.anyEnabled||e)return!1;let{conversionIntentLevel:l,PES:s,NUS:d}=a||{},r=L(l,n.group);return(0,t.r)("desktop",{variant:n.group,decision:r?"SHOW":"SKIP",intentLevel:l,PES:s||0,NUS:d||0,reason:r?`Intent ${l} in allowed list`:`Intent ${l} NOT in allowed list`}),(0,i.a)({upsellType:"navigation_desktop",decision:r?"show":"skip",intentLevel:l||"unknown",PES:s||0,NUS:d||0,experimentVariant:n.group}),r},getNextState:({state:e,action:a})=>{let{conversionIntentLevel:o,PES:n,NUS:l}=e.engagementScore||{};return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_intent_${o}_pes_${n||0}_nus_${l||0}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0}}}),shouldShowSignupModalOnCloseUpClick:C({id:"closeup_modal_trigger",evaluate:({modal:e,clickCloseUp:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickCloseUp:!0})}),shouldShowSignupModalOnClickContextMenuSaveButton:C({id:"context_menu_save_button_trigger",evaluate:({modal:e,clickContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let o;return o=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:o},clickContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnClickCloseupSaveButton:C({id:"closeup_save_button_trigger",evaluate:({modal:e,clickCloseUpContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let o;return o=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:o},clickCloseUpContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnContextMenuDownloadClick:C({id:"desktop_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:o})=>!!((e||a)&&!o?.isShown),getNextState:({action:e,state:a})=>{let o;return o=e.payload.inDwebSwapDownloadUpsellExp?{signupFlow:{type:"login"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"lopDownloadUpsell",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"lopDownloadUpsell"}:{signupFlow:{type:"signup"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:o},clickContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnCloseupDownloadClick:C({id:"closeup_download_button_trigger",evaluate:({limitReached:e,modal:a})=>!!(e&&!a?.isShown),getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId}},clickCloseUpContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource})}),shouldShowSignupModalOnFollowButtonClick:C({id:"follow_button_trigger",evaluate:({modal:e,clickFollowButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",container:e.payload.isContextualFollowEnabled?"follow":"",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:e.payload.isContextualFollowEnabled?"followButton":void 0}},clickFollowButton:!0})}),shouldShowSignupModalOnFollowingButtonClick:C({id:"following_button_trigger",evaluate:({modal:e,clickFollowingButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_following",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowingButton:!0})}),shouldShowSignupModalOnFollowersButtonClick:C({id:"followers_button_trigger",evaluate:({modal:e,clickFollowersButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_followers",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowersButton:!0})}),shouldShowLoginModalOnCommentComposerClick:C({id:"comment_composer_trigger",evaluate:({modal:e,clickCommentComposerUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"tap_unauth_comment_composer",container:"closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"commentComposer"}},clickCommentComposerUpsell:!0})}),shouldShowLoginModalOnRelatedPinOpenLinkClick:C({id:"related_pin_open_link_trigger",evaluate:({modal:e,clickRelatedPinOpenLinkUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"click_context_menu_related_pin_right_click_open_link_button",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickRelatedPinOpenLinkUpsell:!0})}),shouldShowLoginModalOnPinLinkClick:C({id:"pin_link_trigger",evaluate:({modal:e,pinLinkClickCount:a=0})=>!e?.isShown&&(2===a||a%5==0),getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"pinLinkClickHandler_tier1",container:"hybrid_clickthrough",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickPinLinkCount:e.payload.count})}),shouldShowSocialPinLandingModal:C({id:"social_pin_landing_modal_trigger",evaluate:({inviter:e,socialPinLandingModalShown:a,checkExperiment:o})=>{if(!e||a)return!1;let n=o?.("ce_dweb_unauth_splp_blocking").anyEnabled,l=o?.("ce_dweb_unauth_splp_blocking_no_delay").anyEnabled,t=o?.("ce_dweb_unauth_splp_blocking_3s").anyEnabled;return!!(n||l||t)},getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.type===s.Fy?`delay_${e.payload.containerPage}`:`scroll_${e.payload.containerPage}`,container:e.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},socialPinLandingModalShown:!0})}),shouldShowScrollingBox:{id:"desktop_scrolling_box_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},f={shouldShowSaveEducationPopover:C({id:"mobile_save_education_popover_trigger",evaluate:({saveEducationPopoverEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:o}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!o?.startsWith("enabled_group_board")},getNextState:({state:e})=>({...e,showSaveEducationPopover:!0,saveEducationPopoverEverShown:!0})}),shouldShowReplyToSenderSheet:C({id:"mobile_reply_to_sender_sheet_trigger",evaluate:({replyToSenderSheetEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:o}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!o?.startsWith("enabled_reply_to_sender")},getNextState:({state:e})=>({...e,showReplyToSenderSheet:!0,replyToSenderSheetEverShown:!0})}),shouldAllowUnauthSave:C({id:"mobile_unauth_save_quota_check",evaluate:({isPPMAndroidUnauthExperience:e,isFromUnauthContextMenu:a,currentUnauthSaves:o=0,mobileUnauthSaveThreshold:n})=>!a&&!e&&o<(n??2),getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:e.payload.headingType,trigger:{attributionLabel:"extended_save_out_of_quota"===e.payload.headingType?"click_save_button_with_max_unauth_saves":e.payload.attributionLabel||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageNavigationalModal:C({id:"mobile_main_pin_image_modal",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,isModalCurrentlyShown:o,learningUpsellScenario:n,forceShowModal:l})=>{let t=n&&a&&!o&&(e?.("mweb_unauth_main_learning_pin_full_page").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced_row").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency_row").anyEnabled||e?.("mweb_q2_mau_push_pc_eu_safe").anyEnabled);return n&&(l||!!t)},getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal?.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:"none",trigger:{attributionLabel:"navigation_main_pin_image_click",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageAppUpsell:{id:"mobile_main_pin_app_upsell_purple_banner",getNextState:({state:e})=>e,evaluate:({learningUpsellScenario:e,hasConversionUpsell:a,isLearningAppUpsellShown:o})=>a||!e?{shouldToggleAppUpsell:!1,currentlyShowing:!1,newState:!1}:{shouldToggleAppUpsell:!0,currentlyShowing:o,newState:!o}},shouldShowNavigationUpsell:C({id:"mobile_navigation_upsell",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:o,isNavigationFromSwipe:n,currentNavigationCount:l,hasSeenModal:t,pageThreshold:i,isWashDismissible:s,canShowSignupModalOnRouteChange:d,navigationalPagesViewThresholdMobile:r,checkExperiment:u})=>{if(u?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let _=r||i||4;if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!(e&&!n))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let p=!!o&&!!u&&(0,I.Z)(u,o);if(!(o&&d?.(o,p)))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(!((l??0)>=_)||t)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let c=u?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",g=P.includes(c),m=u?.("mweb_feature_upsell_copy_visual_combination_v2"),h=m?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_${_}_${l}`,allowCloseOnOutsideClick:s,headingType:g?"mweb_feature_upsell_copy_visual_combination_v3":h?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowNavigationUpsellIntentBased:C({id:"mobile_navigation_upsell_intent",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:o,isNavigationFromSwipe:n,hasSeenModal:l,canShowSignupModalOnRouteChange:s,engagementScore:d,checkExperiment:r})=>{let u=r?.("engagement_score_v0_mweb");if(!u?.anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let _=!!o&&!!r&&(0,I.Z)(r,o);if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!e||n||!o||!s?.(o,_))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(l)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let{conversionIntentLevel:p,PES:c,NUS:g}=d||{},m=L(p,u.group);if((0,t.r)("mobile",{variant:u.group,decision:m?"SHOW":"SKIP",intentLevel:p,PES:c||0,NUS:g||0,reason:m?`Intent ${p} in allowed list`:`Intent ${p} NOT in allowed list`}),(0,i.a)({upsellType:"navigation_mobile",decision:m?"show":"skip",intentLevel:p||"unknown",PES:c||0,NUS:g||0,experimentVariant:u.group}),!m)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let h=r?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",S=P.includes(h),b=r?.("mweb_feature_upsell_copy_visual_combination_v2"),v=b?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_intent_${p}_pes_${c||0}_nus_${g||0}`,allowCloseOnOutsideClick:!0,headingType:S?"mweb_feature_upsell_copy_visual_combination_v3":v?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowOnLandUpsell:C({id:"mobile_on_land_upsell",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,hasSeenNavUpsell:o,location:t,userAgent:i,showUnauthMwebSocialDefaultModalUpsell:s,isSocialInAppBrowser:d,shouldTriggerOnLand:r=!1})=>{let u;if(e?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let _=!!t&&!!e&&(0,I.Z)(e,t);if(!a||o||!(t&&((0,n.isCloseupPage)(t)||(0,n.isBoardPage)(t)||(0,l.Z)(t)||(0,n.isSearchPage)(t)||(0,n.hasInviteCode)(t)||_&&(0,n.isAnyIdeasPage)(t))))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let p=!(d?.(i)&&e?.("mweb_unauth_social_iab_upsell_boost_experiment",{dangerouslySkipActivation:!0}).anyEnabled)&&s;if(!s&&!r)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let c=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",g=P.includes(c),m=p?null:e?.("mweb_feature_upsell_copy_visual_combination_v2"),h=m?.anyEnabled??!1;if("social"==(u=p?"social":g?"mweb_feature_upsell_copy_visual_combination_v3":h?"mweb_feature_upsell_copy_visual_combination_v2":"none")&&e){let a=e("ce_mweb_visual_plp_upsell");if(a.anyEnabled)switch(a.group){case"enabled_1":u="social_visual_1";break;case"enabled_2":u="social_visual_2";break;case"enabled_3":u="social_visual_3"}}return{shouldShowModal:!0,shouldIncrementCount:!0,showUnauthMwebSocialUpsell:p,modalConfig:{reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation_0",navigationTriggeredUpsell:{newLocation:t,oldLocation:t},headingType:u}}},getNextState:({state:e,decision:a})=>{let{modalConfig:o}=a;return{...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:o?.headingType,trigger:{attributionLabel:o?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:null}}}}}),shouldShowSignupModalOnContextMenuDownloadClick:C({id:"mobile_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:o})=>(e||a)&&!o?.isShown,getNextState:({action:e,state:a})=>{let{inMwebDownloadCTAExp:o,showDownloadCloseupIcon:n,attributionLabelSource:l}=e.payload,t={trigger:{attributionLabel:`click_${l}_download_button`,reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},headingType:o||n?"download_limit_reached":"none"};return{...a,mWebSignupModal:{...a.mWebSignupModal,modal:{isShown:!0,displayProps:t,pinId:e.payload.pinId??""}}}}}),shouldShowSignupModalOnFollowButtonClickMobile:C({id:"follow_button_trigger_mobile",evaluate:({mWebSignupModal:e})=>!e?.modal.isShown,getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:e.payload.isContextualFollowEnabled?"follow":"none",trigger:{attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0}}}})}),shouldShowFloatingBanner:{id:"mobile_floating_banner_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},N={desktop:E,mobile:f}},413211:function(e,a,o){o.d(a,{$S:()=>E,$y:()=>u,AS:()=>c,Aw:()=>eM,BF:()=>el,Bh:()=>B,Bi:()=>T,C5:()=>et,CC:()=>eq,CH:()=>ex,Dk:()=>ea,Dw:()=>eB,EH:()=>ei,F8:()=>eh,FV:()=>ep,Ff:()=>ef,G5:()=>er,GY:()=>ew,Gh:()=>m,HK:()=>v,Hm:()=>e_,IS:()=>eA,Ik:()=>M,Jw:()=>eF,K7:()=>g,Li:()=>en,Lu:()=>X,MZ:()=>eW,Nx:()=>L,OU:()=>_,OX:()=>C,P9:()=>f,Pp:()=>N,Pu:()=>eR,Q4:()=>w,QA:()=>ed,QC:()=>eC,QG:()=>O,Qm:()=>eU,Sy:()=>j,TQ:()=>Z,UA:()=>W,Ue:()=>F,V9:()=>q,WE:()=>eg,XE:()=>eO,Yr:()=>R,Zr:()=>x,aj:()=>eD,ap:()=>eb,b9:()=>eu,by:()=>S,dL:()=>es,f$:()=>$,fC:()=>eP,gU:()=>eV,g_:()=>H,h4:()=>G,ht:()=>ey,i8:()=>y,it:()=>D,jB:()=>Y,k7:()=>eE,kd:()=>k,mX:()=>h,o9:()=>eN,pZ:()=>eT,pp:()=>p,qD:()=>eL,qH:()=>eI,qT:()=>b,qq:()=>eG,qs:()=>V,rA:()=>U,sg:()=>Q,t:()=>eH,tA:()=>A,tP:()=>P,tW:()=>em,uV:()=>ev,ub:()=>z,uy:()=>I,v2:()=>eS,vY:()=>eo,w$:()=>ee,wK:()=>K,xY:()=>ec,yC:()=>ek,z1:()=>J});var n=o(95664),l=o(935833),t=o(184285),i=o(896399),s=o(432414),d=o(817727),r=o(767415);let u="PROCESS_MOBILE_NAVIGATION_CHANGE",_="SET_UPSELL_REASON",p="UPS_EVENT_PIN_VIEW",c="UPS_EVENT_PIN_SAVE",g="UPS_EVENT_DESKTOP_MODAL_SHOW",m="UPS_EVENT_DESKTOP_MODAL_DISMISSED",h="CLICK_CLOSE_UP_CONTEXT_MENU_SAVE_BUTTON",S="CLICK_CLOSE_UP_CONTEXT_MENU_DOWNLOAD_BUTTON",b="TRIGGER_SCROLL_DOWN_UPSELL",v="CLEAR_SCROLL_DOWN_UPSELL",w="DISMISS_BOTTOM_RIGHT_BANNER",y="TRIGGER_SAVE_EDUCATION_POPOVER",O="CLEAR_SAVE_EDUCATION_POPOVER",C="TRIGGER_RELATED_PINS_GRADIENT_UPSELL",I="CLEAR_RELATED_PINS_GRADIENT_UPSELL",P="TRIGGER_REPLY_TO_SENDER_SHEET",L="CLEAR_REPLY_TO_SENDER_SHEET",E="CLICK_CLOSEUP_UPSELL",f="CLICK_CONTEXT_MENU_SAVE_BUTTON_UPSELL",N="CLICK_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",T="CLICK_FOLLOW_BUTTON_UPSELL",M="CLICK_FOLLOWING_BUTTON_UPSELL",U="CLICK_FOLLOWERS_BUTTON_UPSELL",k="CLICK_COMMENT_COMPOSER_UPSELL",x="CLICK_PIN_LINK_UPSELL",D="CLICK_RELATED_PIN_OPEN_LINK_UPSELL",R="SHOW_MOBILE_SIGNUP_MODAL",A="DISMISS_MOBILE_SIGNUP_MODAL",G="SET_MOBILE_SIGNUP_MODAL_TOP_INTEREST",F="INCREMENT_UPSELL_ELIGIBLE_NAVIGATION_COUNT",q="HIDE_UNAUTH_SHARING_MODALS",W="SHOW_UNAUTH_SHARING_MODALS",B="RESTORE_FROM_LOCAL_STORAGE",H="MAIN_PIN_IMAGE_CLICK_MOBILE",V="ON_LAND_UPSELL_MOBILE",$="SET_LEARNING_UPSELL_VISIBILITY",K="CLICK_MOBILE_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",Z="DISMISS_MOBILE_FLOATING_UPSELL",Q="CLICK_FOLLOW_BUTTON_UPSELL_MOBILE",Y="INCREMENT_PIN_SAVE_COUNT",X="DECREMENT_PIN_SAVE_COUNT",J="INCREMENT_UNAUTH_CLICKTHROUGH_COUNT",j="SET_UNAUTH_DOWNLOAD_COUNT",z="UPS_EVENT_PIN_SAVE_MOBILE",ee="SET_REFERRED_APP_UPSELL_STATE",ea=e=>({type:B,payload:{upsellEligibleNavigationCount:e}}),eo=e=>({type:_,payload:{upsellReason:e}}),en=(e,a,o,n,l)=>({type:p,payload:{pinId:e,seoUrl:a,componentType:o,viewParameter:n,checkExperiment:l}}),el=(e,a)=>({type:c,payload:{pinId:e,attributionLabel:a}}),et=()=>({type:m}),ei=()=>({type:w}),es=e=>({type:g,payload:{displayProps:e}}),ed=()=>({type:E}),er=(e,a,o)=>({type:f,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:o}}),eu=(e,a)=>({type:T,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),e_=(e,a,o,n)=>({type:h,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:o,checkExperiment:n}}),ep=()=>({type:M}),ec=()=>({type:U}),eg=()=>({type:k}),em=e=>({type:x,payload:{count:e}}),eh=()=>({type:D}),eS=(e,a)=>({checkExperiment:o,sessionContext:n})=>l=>{l({type:i.gH,payload:{pageUniqueKey:e,containerPage:a,checkExperiment:o,sessionContext:n}})},eb=e=>({type:i.mV,payload:{sessionContext:e}}),ev=e=>({type:i.kQ,payload:{l1Vertical:e}}),ew=(e,a)=>({type:i.aJ,payload:{inviter:e,containerPage:a}}),ey=e=>({checkExperiment:a})=>o=>{o({type:i.Fy,payload:{containerPage:e,checkExperiment:a}})},eO=e=>({checkExperiment:a})=>o=>{o({type:i.Vi,payload:{containerPage:e,checkExperiment:a}})},eC=()=>({type:O}),eI=()=>({checkExperiment:e})=>a=>{a({type:C,payload:{checkExperiment:e}})},eP=()=>({type:I}),eL=()=>({checkExperiment:e,sessionContext:a})=>o=>{let{group:n}=e?.("ce_mweb_unauth_social_feature_education")||{};n?.startsWith("enabled_group_board")?o((({checkExperiment:e})=>a=>{a({type:y,payload:{checkExperiment:e}})})({checkExperiment:e,sessionContext:a})):n?.startsWith("enabled_reply_to_sender")&&o((({checkExperiment:e})=>a=>{a({type:P,payload:{checkExperiment:e}})})({checkExperiment:e,sessionContext:a}))},eE=()=>({type:L}),ef=e=>({type:R,payload:e}),eN=()=>({type:A}),eT=e=>({type:G,payload:{topInterest:e}}),eM=()=>({type:F}),eU=()=>({type:q}),ek=()=>({type:W}),ex=e=>({checkExperiment:a,sessionContext:o})=>(n,t)=>{n({type:u,payload:{...e,checkExperiment:a,sessionContext:o}});let i=t().upsell;(0,d.Z)(i)||(0,l.My)(`mweb.nav.upsell.show.${e.currentNavigationCount}`)},eD=e=>({checkExperiment:a,sessionContext:o})=>(i,d)=>{let u=d().upsell,{country:_,userAgent:p}=o,c=s.YM.mobile.shouldShowOnLandUpsell?.evaluate({checkExperiment:a,isUpsellEnabledGlobally:(0,t.e_)({isModalShown:u.mWebSignupModal.modal.isShown??!1,isUnauthSharingModalsShown:u.mWebSignupModal.isUnauthSharingModalsShown??!1,modalHasShown:!!u.mWebSignupModal.modalHasShown,country:_,userAgent:p}),hasSeenNavUpsell:u.mWebSignupModal.modalHasShown,location:e.location,isPaid:e.isPaid,isSocial:e.isSocial,isDirect:e.isDirect,isSEO:e.isSEO,userAgent:p,showUnauthMwebSocialDefaultModalUpsell:e.showUnauthMwebSocialDefaultModalUpsell,isSocialInAppBrowser:n.ry,session:o});c.shouldShowModal&&c.modalConfig&&((0,l.My)("mweb.nav.upsell.show.0"),c.showUnauthMwebSocialUpsell&&(0,r.nP)("unauth.mweb.social.pin.upsell",{sampleRate:1}),i({type:V,payload:{decision:c,checkExperiment:a}}))},eR=e=>({checkExperiment:a,sessionContext:o})=>(n,t)=>{let i=t().upsell,d=!!i.appUpsells.learningUpsell?.isShown,r=s.YM.mobile.shouldShowMainPinImageNavigationalModal?.evaluate({checkExperiment:a,session:o,isUpsellEnabledGlobally:e.upsellContext.isUpsellEnabledGlobally(),isModalCurrentlyShown:e.upsellContext.isModalShown,learningUpsellScenario:e.learningUpsellScenario}),u=s.YM.mobile.shouldShowMainPinImageAppUpsell?.evaluate({learningUpsellScenario:e.learningUpsellScenario,hasConversionUpsell:!!r,isLearningAppUpsellShown:d});r?(0,l.My)("mweb.nav.upsell.show.main_pin_image_click"):u.shouldToggleAppUpsell?u.currentlyShowing?e.trackInteraction({action:"dismiss",item:"learning-upsell"}):e.trackInteraction({action:"click",item:"learning-upsell"}):e.onImageClick(),n({type:H,payload:{conversionDecision:r,appUpsellDecision:u,checkExperiment:a,pinId:e.pinId}})},eA=({isShown:e,isDismissedByUser:a=!1})=>({type:$,payload:{isShown:e,isDismissedByUser:a}}),eG=({isDismissedByUser:e=!1}={})=>({type:Z,payload:{isDismissedByUser:e}}),eF=(e,a)=>({type:Q,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),eq=()=>({type:X}),eW=()=>({type:J}),eB=e=>({type:j,payload:{count:e}}),eH=e=>({checkExperiment:a,sessionContext:o})=>(o,n)=>{let l=n().upsell;s.YM.mobile.shouldAllowUnauthSave?.evaluate({checkExperiment:a,isPPMAndroidUnauthExperience:e.isPPMAndroidUnauthExperience,isFromUnauthContextMenu:e.isFromUnauthContextMenu,currentUnauthSaves:e.unauthSavedPinsStore.pins.length})&&!l.mWebSignupModal.modal.isShown?(e.unauthSavedPinsStore.save({id:e.pinId,nodeId:e.nodeId,imageUrl:e.getPinGifOrImageSrc({imagesUrls:e.imagesUrls,embedSrc:e.embedSrc,embedType:e.embedType,excludeOriginals:!e.isBot&&!e.isSocialBot})}),o({type:Y}),e.handleShowNavFooter(o,e.forceShowNavFooter,e.isNavBarHidden,e.setForceShowNavFooter),e.successCallback&&e.successCallback()):o({type:z,payload:{attributionLabel:e.isFromUnauthContextMenu?e.attributionLabel||"click_save_button_on_closeup":"click_save_button_with_max_unauth_saves",headingType:e.isFromUnauthContextMenu?"save":"extended_save_out_of_quota",pinId:e.pinId,checkExperiment:a}})},eV=({isShown:e,appUpsellType:a,isBlocking:o})=>({type:ee,payload:{isShown:e,appUpsellType:a,isBlocking:o}})},817727:function(e,a,o){o.d(a,{Z:()=>n});let n=e=>{let{modal:a,mWebSignupModal:o,appUpsells:n}=e;return!!(a.isShown||o.modal.isShown||n.learningUpsell?.isShown||n.iabAppUpsell?.isShown)}},270922:function(e,a,o){o.d(a,{A4:()=>d,T9:()=>r,qo:()=>s,y1:()=>i});var n=o(95664),l=o(262297),t=o(969809);let i=e=>e?(0,t.Z)(e.toUpperCase()):"OTHER",s=e=>e.isPaid?"paid":e.isInvite?"invite":e.isSocial?"social":e.isSEO?"seo":e.utmSource?`utm_${e.utmSource}`:"direct",d=e=>e&&"string"==typeof e?(0,n.$K)(e)?"pinterest":(0,n.dh)(e)?"instagram":/wechat|micromessenger/i.test(e)?"wechat":(0,n.ry)(e)||/facebook|fbav|fban|tiktok|twitter|line/i.test(e)?"social":"none":"none",r=(e,a,n,t)=>{let r=e?.countryFromHostName||e?.country||"",u=e?.userAgent?.raw||("undefined"!=typeof navigator?navigator.userAgent:""),_=d(u),p=(e=>{let{isAnyTodayPage:a,isHubOrIdeaPage:n,isBoardSectionPage:l,isBoardPage:t,isCloseupPage:i,isHomePage:s,isSearchPage:d,isTopicPage:r}=o(173874),u=o(138482).Z,_={pathname:e};return a(_)?"today":n(_)?"ideas":l(_)?"section":t(_)?"board":i(_)?"closeup":s(_)?"home":u(_)?"profile":d(_)?"search":r(_)?"topic":""})(t),c=(0,l.iU)();return{country:r,userAgent:u,referrer:e?.referrerFromHeader||e?.referrerFromCookie||"",unauthID:e?.unauthId||"",region:i(r),channel:s(a),iab:_,isIAB:"instagram"===_||"wechat"===_||"social"===_,landingPageType:p,deviceType:n,revisitationState:c,revisitationCount:c.count,daysSinceLastVisit:(e=>{let{ts:a}=e;if(!a||0===a)return 0;let o=new Date,n=new Date(a);return Math.max(Math.floor(Number(((o.getTime()-n.getTime())/864e5).toFixed(2))),0)})(c)}}},224841:function(e,a,o){o.d(a,{Z:()=>l});var n=o(173874);function l(e,a,o=!1){return!!(0,n.isAnyIdeasPage)(a)&&e?.("lop_eoq_lever_nav_mweb",{dangerouslySkipActivation:o}).anyEnabled}},658375:function(e,a,o){o.d(a,{C:()=>i,P:()=>t});var n=o(173874),l=o(767415);let t=()=>!1,i=e=>{(0,n.isDiscoverArticlePage)(e)&&!t()&&(0,l.nP)("mobile_signup_modal.rules.suppress_for_discover_article",{flushImmediate:!0,sampleRate:1})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/39477-6a41a59481875f20.mjs.map