(self.modernJsonp=self.modernJsonp||[]).push([["83511"],{214879:function(e,t,n){n.d(t,{Z:()=>a,v:()=>i});let i=()=>"undefined"!=typeof navigator&&"getInstalledRelatedApps"in navigator;async function a(){if(!i())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},127078:function(e,t,n){n.d(t,{EJ:()=>p,EX:()=>c,Ig:()=>S,Jy:()=>_,YS:()=>b,ZP:()=>y,a3:()=>m,al:()=>k,dk:()=>f,hO:()=>g,kH:()=>v,nN:()=>w,z6:()=>h});var i=n(667294),a=n(581722),r=n(994507),l=n(784548),s=n(79271);let o=Date.now(),u=()=>(0,s.OC)(),d=()=>Date.now()-o,c=()=>(0,a.v9)(e=>e.currentUserTracker?.storageAccessAllowed??r.iN),p=()=>(0,a.v9)(e=>e.currentUserTracker?.visitedUnauthPages??r.PW),_=()=>(0,a.v9)(e=>e.currentUserTracker?.closeupPins??r.tf),m=()=>(0,a.v9)(e=>e.currentUserTracker?.completedSearches??r.fE),v=()=>(0,a.v9)(e=>e.currentUserTracker?.clickthroughPins??r.iK),g=()=>(0,a.v9)(e=>e.currentUserTracker?.savedPins??r.pn),h=()=>{let e=(0,a.I0)();return(0,i.useCallback)(t=>{e((0,l.$y)(t))},[e])},b=()=>{let e=(0,a.I0)();return(0,i.useCallback)((t,n)=>{e((0,l.bj)(t,n))},[e])},w=()=>{let e=(0,a.I0)();return(0,i.useCallback)(t=>{e((0,l.x1)(t))},[e])},S=()=>{let e=(0,a.I0)();return(0,i.useCallback)(t=>{e((0,l.tb)(t))},[e])},f=()=>{let e=(0,a.I0)();return(0,i.useCallback)(t=>{e((0,l.am)(t))},[e])},k=()=>{let e=(0,a.I0)();return(0,i.useCallback)(()=>{e((0,l.AU)())},[e])},y=()=>{let e=(0,a.v9)(e=>e.currentUserTracker?.isAuthenticated??r.MK),t=(0,a.v9)(e=>e.currentUserTracker?.country??r.UF),n=(0,a.v9)(e=>e.currentUserTracker?.region??r.fu),s=c(),o=p(),y=_(),E=m(),T=v(),M=(0,a.v9)(e=>e.currentUserTracker?.downloadedPinsCount??r.cH),R=g(),I=(0,a.v9)(e=>e.currentUserTracker?.isQUS??r.R8),O=(0,a.v9)(e=>e.currentUserTracker?.revisitationState??(0,r.dm)()),P=(0,a.v9)(e=>e.currentUserTracker?.daysSinceLastRevisitation??r.ne),C=b(),x=w(),U=S(),A=f(),L=k();return{isAuthenticated:e,isStorageAllowed:s,isQUS:I,closeupPins:y,visitedPages:o,setVisitedPage:C,completedSearches:E,setCompletedSearch:x,removeCompletedSearch:U,clickthroughPins:T,setClickthroughPin:A,downloadCount:M,updateDownloadCount:L,savedPins:R,setSavedPins:(()=>{let e=(0,a.I0)();return(0,i.useCallback)(t=>{e((0,l.pv)(t))},[e])})(),revisitationState:O,daysSinceLastRevisitation:P,updateRevisitation:(()=>{let e=(0,a.I0)();return(0,i.useCallback)(t=>{e((0,l.VD)(t))},[e])})(),initCurrentUserTracker:h(),getPinImpressionCount:u,getSessionDuration:d,country:t,region:n}}},331506:function(e,t,n){n.d(t,{bN:()=>_,BY:()=>c,fs:()=>o,EU:()=>s,kt:()=>p,Ly:()=>d,RC:()=>l,eK:()=>u});let i=/\s\s+/g;var a=n(680589);let r=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_title"])),l=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,s=(e,t)=>e?e.trim().length>t?(0,a.ZP)(e.trim(),t).trim():e.trim():"",o=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:i,storyPinDataId:a,storyPinDataMetadataPinTitle:r})=>{let l=r||e,o=s(t,200);return o||n||i||(a&&l?l:null)},u=e=>{let{richSummaryDisplayName:t}=e,n=e.pinJoinVisualAnnotation||[],r=e.pinJoinAnnotationsWithLinks||{},l=e.richMetadataDescription||"",s=e.closeupUnifiedDescription||"",o=n.map(e=>(r||{})[e]||{name:e,url:""}),u="",d=(t||"").toLocaleLowerCase().trim(),c=l.toLocaleLowerCase().trim(),p=s.toLocaleLowerCase().trim();return s&&s.length>3&&p!==d?u=s:l&&l.length>3&&c!==d&&(u=l),u&&(u=(0,a.ZP)(u,496).replace(i," ").trim()),{description:u,annotationsWithLinks:o}},d=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:i,storyPinDataId:a,storyPinDataMetadataPinTitle:l,pinJoinVisualAnnotation:u,seoNoindexReason:d,shouldUseSimplifiedTitle:c=!1})=>r.has(d??"")?u?.[0]??" ":c?s(t,200)||u?.[0]||"":o({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:i,storyPinDataId:a,storyPinDataMetadataPinTitle:l})||u?.[0]||e,c=e=>`/pin/${e}/`,p=(e,t)=>{let n=`Pinterest video from ${t}: `.concat(e);return""===t?e:n},_=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:c(e)},702763:function(e,t,n){n.d(t,{X:()=>i});let i="favorited"},849232:function(e,t,n){n.d(t,{kf:()=>g,l5:()=>m,of:()=>p,xC:()=>v,yz:()=>_});var i=n(667294),a=n(213491),r=n(504644),l=n(893957),s=n(986523),o=n(767415),u=n(785893);let{Provider:d,getMaybe:c}=(0,a.Z)("PwaContext"),p=({children:e,initialContext:t})=>{let[n,a]=(0,i.useState)(null),s=t||{pwaType:"unknown",twaType:null},c=s.pwaType;(0,l.Z)(()=>{let e=(0,r.FB)(window)||"unknown";a(e),c!==e&&(0,o.nP)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:c,clientPwaType:e,conflict:"unknown"!==c&&"unknown"!==e}})});let p="unknown"===c&&n?n:c,{twaType:_}=s,m=(0,i.useMemo)(()=>({pwaType:p,twaType:_}),[p,_]);return(0,u.jsx)(d,{value:m,children:e})},_=()=>{let e=c();return e?.pwaType??"unknown"},m=()=>{let e=c();return e?.twaType??null},v=()=>"android-twa"===_(),g=()=>{let e=_(),t=(0,s.Z)();return"unknown"===e&&t?null:"windows"===e}},917569:function(e,t,n){n.d(t,{Z:()=>a});var i=n(501010);function a(){let{checkExperiment:e}=(0,i.Z)();return()=>e("web_initial_client_fetches_reduction").anyEnabled}},415316:function(e,t,n){n.d(t,{o:()=>i,u:()=>a});let{Provider:i,getMaybe:a}=(0,n(213491).Z)("inviteContext")},787194:function(e,t,n){n.d(t,{M:()=>l,Q:()=>r});var i=n(667294);let a=(0,i.createContext)(null),r=()=>(0,i.use)(a),l=a},45762:function(e,t,n){n.d(t,{Z:()=>_});var i=n(4533),a=n(15881),r=n(505633),l=n(331506),s=n(34550),o=n(418282),u=n(935833);let d=new class{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}},c=new class{constructor(){this.rules={},this.init()}init(){for(let e of[{category:"dweb_max_free_pin_modal",validate:this.validateImageView.bind(this),action:"SHOW_LOGIN_MODAL"},{category:"dweb_save",validate:this.saveRule.bind(this),action:"SHOW_SAVE_MODAL"},{category:"dweb_scroll_banner_dismiss_rule",validate:this.scrollBanerDismissRule.bind(this),action:"BOTTOM_RIGHT_BANNER_DISMISS"},{category:"dweb_scroll_banner_limit_rule",validate:this.scrollBannerLimitRule.bind(this),action:"BOTTOM_RIGHT_BANNER_LIMIT"},{category:"dweb_scroll_banner_show",validate:this.scrollBannerShowRule.bind(this),action:"BOTTOM_RIGHT_BANNER_SHOW"}])this.addRule(e)}initExperiment(e){this.experiment=e}addRule(e){this.rules[e.category]=this.rules[e.category]??[],this.rules[e.category].push(e)}evaluate(e,t){if(!this.rules[e])return null;for(let n of this.rules[e])if(n.validate(t))return n.action;return null}validateImageView(e){let{clickCount:t}=e,{hasSeenLoginModal:n}=e,{hasDismissedLoginModal:i}=e,a=this.experiment?.group==="enabled_relaxation";return a?t+1>=4&&!n&&!i:t+1>=4&&!n}saveRule(e){return"desktop"===e.deviceType}scrollBanerDismissRule(e){return e.scrollTop<64}scrollBannerLimitRule(e){return e.scrollTop<4e3}scrollBannerShowRule(e){let t=this.experiment?.group==="enabled_relaxation";return t?e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3&&!e.hasDismissedLoginModal:e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3}};var p=n(925201);let _=new class{constructor(){this.init()}init(){d.on("pinView",this.handlePinView.bind(this)),d.on("pinSave",this.handleSavePin.bind(this)),d.on("showDesktopSignupModal",this.showDesktopSignupModal.bind(this)),d.on("hideDesktopSignupModal",this.hideDesktopSignupModal.bind(this)),d.on("onScrollHybridBanner",this.onScrollHybridBanner.bind(this))}initExperiment(e){this.experiment=e("dweb_upsell_manager_mvp_2"),this.experiment&&c.initExperiment(this.experiment)}emitEvent(e,t){d.emit(e,t)}handlePinView(e){let{history:t,linkTarget:n}=e,d=(0,s.M0)().getItem(i.cu)??0;(0,s.M0)().setItem(i.cu,d+1);let _=(0,o.Nl)().getItem(a.J7);if("SHOW_LOGIN_MODAL"===c.evaluate("dweb_max_free_pin_modal",{clickCount:d,hasSeenLoginModal:_})){let{onUpsellTriggerCallback:i}=e;i(),(0,u.My)("dweb.navigational.upsell.show"),(0,o.Nl)().setItem(a.J7,"true");let s={pinId:e.pinId,seoUrl:e.seoUrl},d=(0,p.Z)((0,l.bN)(s),{mt:"login"});if("fullPageLoad"===n)(0,r.Z)(d,!1);else if("duploClientNav"===n)t.push(d);else{let e=window.open(d,"_blank");e?.focus()}}}handleSavePin(e){if("SHOW_SAVE_MODAL"===c.evaluate("dweb_save",{deviceType:e.deviceType})){let{pinId:t,attributionLabel:n,modalHeadingType:i,showSignupModal:a}=e;a({attributionLabel:"extended_save_out_of_quota"===i?"click_save_button_with_max_unauth_saves":n||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",mobileOptions:{headingType:i},desktopOptions:{modalType:"signup",modalOptions:{source:"saveButtonExp",container:"save"}},pinId:t})}}showDesktopSignupModal(e){let{displayProps:t,viewType:n,viewParameter:i,trackInteraction:a,trackConversionUpsellForContext:r,logDesktopSignupModalEvent:l,dispatchSignupModalAction:s}=e;s({type:"show",displayProps:t});let{attributionLabel:o,signupFlow:u,reason:d}=t;a({action:"trigger",item:u.type.includes("signup")?"signup-modal":"login-modal"}),r({viewType:n,viewParameter:i,eventType:14688,element:{UPSELL_LOGIN_OR_SIGNUP:13319,ACTION_REQUIRES_LOGIN_OR_SIGNUP:13320,CLICK_LOGIN_OR_SIGNUP:13321}[d]||13322,component:"login"===u.type?14212:14214,upsellReason:o}),l("dispatch_show",{attributionLabel:o,modalType:u.type,reason:d})}hideDesktopSignupModal(e){let{shouldDoSideEffects:t,loginForMore:n,dispatchSignupModalAction:i,logDesktopSignupModalEvent:a}=e,r=e.isEligibilityLoginForMore;t&&n&&r&&n.setVisible(!1),i({type:"dismiss"}),a("dispatch_dismiss",{shouldDoSideEffects:t})}onScrollHybridBanner(e){let{evt:t,isSafari:n,trackConversionUpsell:i,UnauthHybridBannerClassComponent:r,isInOpenModalExperience:l}=e,s=0,u=t&&t.target instanceof Document?t.target:null;if(u&&u.documentElement&&u.documentElement.scrollTop>0?s=u.documentElement.scrollTop:u&&u.body&&u.body.scrollTop>0&&(s=u.body.scrollTop),"BOTTOM_RIGHT_BANNER_DISMISS"===c.evaluate("dweb_scroll_banner_dismiss_rule",{scrollTop:s}))r.state.shouldShowBanner&&!r.state.bannerDismissed&&(i({element:13893,eventType:10243}),r.state.bannerDismissed=!0),r.setShouldShowBanner(!1);else if("BOTTOM_RIGHT_BANNER_LIMIT"===c.evaluate("dweb_scroll_banner_limit_rule",{scrollTop:s})){let e=r.state.shouldShowBanner;r.setState(e=>({shouldShowBanner:"BOTTOM_RIGHT_BANNER_SHOW"===c.evaluate("dweb_scroll_banner_show",{isInOpenModalExperience:l,isSafari:n,state:e}),scrollSessionCount:Math.ceil(s/800)}),()=>{e||!r.state.shouldShowBanner||r.state.bannerViewed||(i({eventType:14688,element:13319,component:14479,upsellReason:"scroll_down"}),r.state.bannerViewed=!0)})}else!(0,o.Nl)().getItem(a.J7)&&!l&&n&&t&&t.preventDefault()}}},411657:function(e,t,n){n.d(t,{D:()=>i,u:()=>a});let{Provider:i,getMaybe:a}=(0,n(213491).Z)("unauthPageWrapperContext")},167021:function(e,t,n){n.d(t,{K:()=>l,T:()=>s});var i=n(667294),a=n(785893);let r=(0,i.createContext)({getPinFeedbackStatus:()=>void 0,setPinFeedbackStatus:()=>{}}),l=()=>(0,i.use)(r);function s({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),l=(0,i.useMemo)(()=>({getPinFeedbackStatus:({pinId:e})=>t[e],setPinFeedbackStatus:({pinId:e,pinFeedbackStatus:i})=>n({...t,[e]:i})}),[t]);return(0,a.jsx)(r,{value:l,children:e})}},329577:function(e,t,n){n.d(t,{ET:()=>s,JH:()=>u,UQ:()=>o,WG:()=>c,yh:()=>p});var i=n(686659),a=n(667294),r=n(213491),l=n(785893);let s={NONE:"NONE",GROUP:"GROUP",SECRET:"SECRET",ARCHIVED:"ARCHIVED"},o={NONE:0,ARCHIVED:1,GROUP:2,SECRET:3},u={COLORS:"COLORS",CREATED_BY_ME:"CREATED_BY_ME",FAVORITED:"FAVORITED",FAVORITED_AND_CREATED:"FAVORITED_AND_CREATED_BY_ME",INTERESTS:"INTERESTS",NONE:""},{Provider:d,getMaybe:c}=(0,r.Z)("ProfileViewContext");function p({children:e}){(0,a.useEffect)(()=>{(0,i.Z)("ProfileViewContext","/app/www/ProfileViewContext.tsx")},[]);let[t,n]=(0,a.useState)(),[r,s]=(0,a.useState)(new Map),[o,c]=(0,a.useState)(),[p,_]=(0,a.useState)(),[m,v]=(0,a.useState)(u.NONE),[g,h]=(0,a.useState)("ALL"),[b,w]=(0,a.useState)(0),[S,f]=(0,a.useState)(),k=(0,a.useCallback)((e,t)=>{s(new Map(r.set(e,t)))},[r]),y=(0,a.useMemo)(()=>({boardPinDensity:t,boardSortOrder:r,collagesFilter:g,profileBoardView:o,profilePinDensity:p,profileFollowingSelectedIndex:b,selfProfilePinFilter:m,setBoardPinDensity:n,setSelfProfilePinFilter:v,updateBoardSortOrder:k,selfProfileBoardFilter:S,setCollagesFilter:h,setSelfProfileBoardFilter:f,setProfileBoardView:c,setProfilePinDensity:_,setProfileFollowingSelectedIndex:w}),[t,r,g,o,p,b,m,S,h,k]);return(0,l.jsx)(d,{value:y,children:e})}},914253:function(e,t,n){n.d(t,{dL:()=>s,fJ:()=>u,gC:()=>o});var i=n(581722),a=n(213491),r=n(785893);let{Provider:l,get:s}=(0,a.Z)("Boards");function o(){let e=s();return t=>e[t]}function u({children:e}){let t=(0,i.v9)(({boards:e})=>e,i.wU);return(0,r.jsx)(l,{value:t,children:e})}},874288:function(e,t,n){n.d(t,{Z:()=>a});var i=n(581722);let a=()=>(0,i.v9)(({session:{canUseNativeApp:e}})=>e)},307618:function(e,t,n){n.d(t,{$:()=>s,w:()=>o});var i=n(667294),a=n(213491),r=n(785893);let{Provider:l,getMaybe:s}=(0,a.Z)("CloseupPreviewContext");function o({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),a=(0,i.useMemo)(()=>({setData:(e,t)=>n(n=>({...n,[e]:t})),getData:e=>t[e]}),[t]);return(0,r.jsx)(l,{value:a,children:e})}},40763:function(e,t,n){n.d(t,{Z:()=>l});var i=n(501010),a=n(774838),r=n(739405);let l=({skipExpActivation:e=!1})=>{let{checkExperiment:t}=(0,i.Z)(),n=(0,r.HG)(),{isBot:l,isAuthenticated:s}=(0,a.B)();return!s&&!!n&&n&&!l&&t("unauth_dweb_closeup_redesign",{dangerouslySkipActivation:e}).anyEnabled}},20717:function(e,t,n){n.d(t,{$p:()=>T,_l:()=>M,cO:()=>E,t2:()=>R,w2:()=>I,xM:()=>y});var i=n(686659),a=n(667294),r=n(312048),l=n(935059),s=n(173874),o=n(501010),u=n(774838),d=n(661376),c=n(646108),p=n(341687),_=n(739405),m=n(785893);let v="UnauthDesktopSocialPinLandingPageContext",g="UnauthMobileSocialPinLandingPageContext",h="AthDesktopSocialPinLandingPageContext",b="AuthMobileSocialPinLandingPageContext",w=(0,a.createContext)({hasSeenAuthDesktopLandingToast:!1,hasSeenAuthMobileLandingToast:!1,setHasSeenAuthDesktopLandingToast:()=>{},setHasSeenAuthMobileLandingToast:()=>{},hasDismissedLoginModal:!1,setHasDismissedLoginModal:()=>{},hasDismissedGradientUpsell:!1,setHasDismissedGradientUpsell:()=>{},isGradientUpsellTriggerInView:!1,setIsGradientUpsellTriggerInView:()=>{},pinImageUrl:"",setPinImageUrl:()=>{}}),S=({children:e})=>{let[t,n]=(0,a.useState)(!1),[i,r]=(0,a.useState)(!1),[l,s]=(0,a.useState)(!1),[o,u]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[p,_]=(0,a.useState)(""),v=(0,a.useMemo)(()=>({hasSeenAuthMobileLandingToast:t,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:i,setHasSeenAuthDesktopLandingToast:r,hasDismissedGradientUpsell:l,setHasDismissedGradientUpsell:s,hasDismissedLoginModal:o,setHasDismissedLoginModal:u,isGradientUpsellTriggerInView:d,setIsGradientUpsellTriggerInView:c,pinImageUrl:p,setPinImageUrl:_}),[t,i,l,s,o,u,d,c,p,_]);return(0,m.jsx)(w,{value:v,children:e})},f=(0,a.createContext)({key:"",data:null}),k=({children:e})=>{let t=(0,r.TH)(),{isSocialBot:n,isBot:i}=(0,u.B)(),S=(0,l.Z)(),k=S&&S.isAuth,y=(0,_.HG)(),E=(0,a.useMemo)(()=>(0,s.isPinFeedbackPage)(t)&&(0,p.Z)(t.search).invite_code||"",[t]),T=(0,a.useMemo)(()=>{if(!((0,s.isSignupPage)(t)||(0,s.isLoginPage)(t)))return"";let e=(0,p.Z)(t.search);if(e.invite_code)return e.invite_code;let n=e.from;if(!n)return"";let i=(0,c.Z)(n).split("?")[1]||"";return i&&(0,p.Z)(i).invite_code||""},[t]),M=(0,a.useMemo)(()=>{let e=(0,r.LX)({path:"/pin/:id"},t.pathname);return String(e&&"id"in e.params&&e.params.id)||""},[t.pathname]),[R,I]=(0,a.useState)({key:"",data:null}),[O,P]=(0,a.useState)(!1),C=!k&&y,x=!k&&!y,{checkExperiment:U}=(0,o.Z)(),{hasDismissedLoginModal:A}=(0,a.use)(w),L=!i&&!n&&x&&E,{inDwebFullPageModalExp:D,dWebFullPageModalExpGroup:N,inDwebSocialModalUpdateExp:G,dWebSocialModalUpdateExpGroup:B,inDwebUnauthRelatedPinsLimitExp:Z,unauthDwebRelatedPinsLimitGroup:H,inDwebUnauthSocialPinLandingExp:V,unauthDwebSocialPinLandingGroup:F,inMwebUnauthRelatedPinsLimitExp:j,unauthMwebRelatedPinsLimitGroup:W,inMwebUnauthSocialPinLandingSecondaryUpsellExp:J,unauthMwebSocialPinLandingSecondaryUpsellGroup:z,inMwebSocialFeatureEducationExp:Y,mwebSocialFeatureEducationExpGroup:$,inMwebLoginSignupPageExp:Q,unauthMwebLoginSignupPageExpGroup:K}=(0,a.useMemo)(()=>{let e=!i&&!n&&C&&E&&(()=>{let e=U("ce_dweb_unauth_splp_blocking",{dangerouslySkipActivation:!0}),t=U("ce_dweb_unauth_splp_blocking_no_delay",{dangerouslySkipActivation:!0}),n=U("ce_dweb_unauth_splp_blocking_3s",{dangerouslySkipActivation:!0});return t.anyEnabled?t:n.anyEnabled?n:e})()||{anyEnabled:!1,group:void 0},t=!i&&!n&&C&&E&&U("ce_dweb_unauth_splp_modal_update",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},a=!i&&!n&&C&&E&&U("sg_dweb_unauth_social_pin_landing_page")||{anyEnabled:!1,group:void 0},r=!i&&!n&&C&&E&&U("ce_dweb_unauth_related_pins_limit",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},l=!i&&!n&&x&&E&&U("ce_mweb_unauth_related_pins_limit",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},s=L&&A&&U("sg_mweb_unauth_social_pin_landing_secondary_upsell")||{anyEnabled:!1,group:void 0},o=!i&&!n&&x&&(T||E)&&U("ce_mweb_unauth_social_feature_education")||{anyEnabled:!1,group:void 0},u=!i&&!n&&x&&(T&&U("ce_mweb_unauth_splp_signup_banner")||E&&U("ce_mweb_unauth_splp_signup_banner",{dangerouslySkipActivation:!0}))||{anyEnabled:!1,group:void 0};return{inDwebFullPageModalExp:e.anyEnabled,dWebFullPageModalExpGroup:e.group,inDwebSocialModalUpdateExp:t.anyEnabled,dWebSocialModalUpdateExpGroup:t.group,inDwebUnauthRelatedPinsLimitExp:r.anyEnabled,unauthDwebRelatedPinsLimitGroup:r.group,inDwebUnauthSocialPinLandingExp:a.anyEnabled,unauthDwebSocialPinLandingGroup:a.group,inMwebUnauthRelatedPinsLimitExp:l.anyEnabled,unauthMwebRelatedPinsLimitGroup:l.group,inMwebUnauthSocialPinLandingSecondaryUpsellExp:s.anyEnabled,unauthMwebSocialPinLandingSecondaryUpsellGroup:s.group,inMwebSocialFeatureEducationExp:o.anyEnabled,mwebSocialFeatureEducationExpGroup:o.group,inMwebLoginSignupPageExp:u.anyEnabled,unauthMwebLoginSignupPageExpGroup:u.group,showMwebDefaultModalUpsellOnLand:L}},[i,n,C,x,E,T,U,A,L]),X=E||T,q="default";"enabled_popover_profile"===F?q="default_with_sender_recent_pins":Y&&(q="default_with_social_feature_education");let ee=(0,d.Z)(X?{name:"InviteCodeMetadataResource",options:{invite_code:X,field_set_key:q}}:null),et=ee.isLoaded?ee.data:null;(0,a.useEffect)(()=>{if(et){let e=et.sender??null,t=k&&e.id!==S.id&&e?.should_show_messaging&&S.should_show_messaging;if(C&&e){let t=null,n=null;V||B||H?(t={inviterAvatarUrl:Z?e.image_large_url||e.image_medium_url||"":e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:F,inviterRecentPins:"enabled_popover_profile"===F&&e.recent_pin_images?.["222x"]||[],inviterUsername:"enabled_popover_profile"===F&&e.username||""},B&&(t.socialModalUpdateExpGroup=B),H&&(t.limitedRelatedPinsExpGroup=H)):D?n={inDwebFullPageModalExp:D,isFullPageModalDismissed:O,setIsFullPageModalDismissed:P}:t=[5,9,12,16].includes(et.invite_channel)?null:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name},I({key:v,data:{inviter:e,popoverData:t,modalData:n}})}else if(x&&e){let t=L||W;if(t||Q||Y){let n={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,showDefaultUpsell:!!t};J&&(n.secondaryExpGroup=z),W&&(n.limitedRelatedPinsExpGroup=W),Y&&!e.is_private_profile&&(n.socialFeatureEducationExpGroup=$),Q&&(n.loginSignupPageExpGroup=K),I({key:g,data:{upsellData:n}})}}else t&&!y?I({key:b,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:S.id||""},pin:{pinId:M}}}}):t&&y&&I({key:h,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:S.id||""},pin:{pinId:M}}}})}else I({key:"",data:null})},[et,k,y,M,S,D,N,G,B,Z,H,V,x,F,C,j,W,J,z,Y,$,Q,K,O,L]);let en=(0,a.useMemo)(()=>R,[R]);return(0,m.jsx)(f,{value:en,children:e})},y=({children:e})=>((0,a.useEffect)(()=>{(0,i.Z)("SocialPinLandingPageContext","/app/www/lib/SocialPinLandingPageContext.tsx")},[]),(0,m.jsx)(S,{children:(0,m.jsx)(k,{children:e})})),E=()=>{let e=(0,a.use)(f);return e.key===v?e:null},T=()=>{let e=(0,a.use)(f);return e.key===g?e:null},M=()=>{let e=(0,a.use)(f);return e.key===b?e:null},R=()=>{let e=(0,a.use)(f);return e.key===h?e:null},I=()=>(0,a.use)(w)},248481:function(e,t,n){n.d(t,{G3:()=>c,Rp:()=>d,kp:()=>u});var i=n(4533),a=n(15881),r=n(375181),l=n(34550),s=n(418282);let o=14*r.F4,u=(e,t)=>{let n=function(){let e=Date.now(),t=(0,l.M0)(),n=Number(t.getItem(i.Li)??null);return{currentTime:e,firstUpsellTime:Number(t.getItem(i.O7)??null),lastUpsellTime:n,showedAppUpsellCurrentSession:!!(0,s.Nl)().getItem(a.JO)}}();return e?function(e,t,n){let{currentTime:a,firstUpsellTime:r,lastUpsellTime:s,showedAppUpsellCurrentSession:u}=e;return(n=n||o,!r||a<r+t)?!u:a-s>n&&((0,l.M0)().removeItem(i.O7),!0)}(n,r.F4):function(e,t){let{currentTime:n,lastUpsellTime:i}=e;return t=t||o,!i||n-i>t}(n,t)},d=({isBot:e,platform:t,userAgent:n})=>{try{return!e&&"android"===t&&7>parseFloat((e=>{let t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0})(n))}catch(e){return!1}},c=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},99672:function(e,t,n){n.d(t,{E:()=>l,S:()=>s});var i=n(667294),a=n(4533),r=n(34550);let l=e=>{let t=(0,r.M0)();e?t.setItem(a.rd,1):t.removeItem(a.rd)},s=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{t(!0)},[]),e&&((0,r.M0)().getItem(a.rd)??!1)}},818906:function(e,t,n){n.d(t,{$:()=>c,Z:()=>_});var i=n(667294),a=n(581722),r=n(4533),l=n(15881),s=n(127078),o=n(784548),u=n(34550),d=n(418282);let c=2,p=e=>e.length?{pins:e}:null,_=()=>{let e,t=(0,u.M0)(),n=(0,a.I0)(),_=(0,s.hO)(),m=Array.isArray(_)&&_.length>0?_.map(e=>({id:e.id,imageUrl:e.imageUrl,nodeId:null})):(e=d.ZP.getItem(l.w3),e?.pins??[]),v=m.map(e=>e.id).join(","),g=(0,i.useMemo)(()=>m,[v]),h=e=>{t.accessAllowed?t.setItem(r.s1,p(e)):d.ZP.setItem(l.w3,p(e)),n((0,o.pv)(e.map(e=>({id:e.id,imageUrl:e.imageUrl,ts:Date.now()}))))},b=()=>g.length<c;return{pins:g,save:e=>{b()&&h(g.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>{h(g.filter(({id:t})=>t!==e))},isSaved:e=>g.some(({id:t})=>t===e),clear:()=>{h([])},canSaveMore:b}}},39722:function(e,t,n){n.d(t,{B:()=>u,m:()=>o});var i=n(667294),a=n(312048),r=n(213491),l=n(785893);let{Provider:s,getMaybe:o}=(0,r.Z)("NotifDetailRepinContext");function u({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),[r,o]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!1),c=(0,a.TH)(),p=(0,i.useMemo)(()=>{let e=/^\/pin\/\d+\/repin\/?$/,i=/^\/news_hub\/\d+\/?$/;return{isSaved:e=>!!t[e],save:e=>{u&&n(t=>({...t,[e]:!0}))},reset:()=>{let t=window?.location.pathname||"";i.test(t)||e.test(t)||(n(Object.freeze({})),o(!1),d(!1))},isInNewsHubQuickSaveExpAndNewsHubPage:()=>{let e=c.pathname||"";return i.test(e)&&r},inNewsHubQuickSaveExp:r,setInNotifDetailPage:d,setInNewsHubQuickSaveExp:o}},[t,r,u,c]);return(0,l.jsx)(s,{value:p,children:e})}},394382:function(e,t,n){n.d(t,{_T:()=>o,lp:()=>u,xY:()=>d});var i=n(667294),a=n(213491),r=n(501010),l=n(785893);let{Provider:s,get:o,getMaybe:u}=(0,a.Z)("HomeFeedTuner");function d({children:e}){let[t,n]=(0,i.useState)(!1),[a,o]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!1),{checkExperiment:c}=(0,r.Z)(),p=(0,i.useMemo)(()=>c("mweb_ap_res_user_in_grid_feedback",{dangerouslySkipActivation:!0}).anyEnabled,[c]),_=(0,i.useCallback)(()=>{p&&n(!0)},[p]),m=(0,i.useCallback)(()=>{n(!1)},[]),v=(0,i.useCallback)(()=>{p&&o(!0)},[p]),g=(0,i.useCallback)(()=>{o(!1)},[]),h=(0,i.useCallback)(()=>{d(!0)},[]),b=(0,i.useCallback)(()=>{d(!1)},[]),w=(0,i.useMemo)(()=>({shouldRefreshHomefeed:t,markForRefresh:_,clearRefreshFlag:m,cameFromRefineButton:a,markCameFromRefineButton:v,clearCameFromRefineButton:g,cameFromRefineRecommendationsLink:u,markCameFromRefineRecommendationsLink:h,clearCameFromRefineRecommendationsLink:b}),[t,a,u,_,m,v,g,h,b]);return(0,l.jsx)(s,{value:w,children:e})}},500912:function(e,t,n){n.d(t,{Q:()=>o,n:()=>s});var i=n(667294),a=n(213491),r=n(785893);let{Provider:l,getMaybe:s}=(0,a.Z)("RepinContext");function o({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),a=(0,i.useMemo)(()=>({getSavedPinId:e=>t[e],isSaved:e=>!!t[e],save:(e,t)=>n(n=>({...n,[e]:t})),unsave:e=>n(t=>({...t,[e]:null}))}),[t]);return(0,r.jsx)(l,{value:a,children:e})}},636953:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),a=n(767415);function r(e){let t=(0,i.useRef)({kind:"NotOver"}),n=(0,i.useCallback)(()=>{"NotOver"===t.current.kind&&(t.current={kind:"OverButNotClicked",mousedOverAt:Date.now()})},[]),r=(0,i.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,a.LY)("entrypointRouter.timeOnLinkUntilMouseOut",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,a.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"MouseOut"}})),t.current={kind:"NotOver"}},[e]);return{onClick:(0,i.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,a.LY)("entrypointRouter.timeOnLinkUntilClick",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,a.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"Click"}}),t.current={kind:"OverAndHasClicked"})},[e]),onMouseEnter:n,onMouseLeave:r}}},484807:function(e,t,n){function i({children:e,metricName:t}){let n=void 0;return n&&n.serverRenderTimings&&!n.serverRenderTimings[t]&&(n.serverRenderTimings[t]=Date.now()),e}n.d(t,{Z:()=>i}),(0,n(701943).kr)()}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/83511-cfe50f61d1e5bfe2.mjs.map